{% extends 'scheduling/base.html' %}
{% load static %}
{% block styles %}
    <link rel="stylesheet" href="{% static 'dashboard/css/admin.css' %}" />
{% endblock %}
{% block content %}
<section>
    <h2>Financeiro</h2>
    <p><a href="{% url 'logout' %}">Sair</a></p>
    <div class="grid">
        <div class="card">
            <h3>Total virtual (PIX)</h3>
            <p>R${{ total_virtual }}</p>
        </div>
        <div class="card">
            <h3>Total físico (dinheiro)</h3>
            <p>R${{ total_fisico }}</p>
        </div>
    </div>
    <div class="table-responsive" style="margin-top:16px">
    <table class="table">
        <thead>
            <tr>
                <th>Data</th><th>Cliente</th><th>Serviço</th><th>Barbeiro</th><th>Valor</th><th>Forma de pagamento</th>
            </tr>
        </thead>
        <tbody>
            {% for ap in pagos %}
            <tr>
                <td>{{ ap.date|date:'d/m/Y' }} {{ ap.hour|time:'H:i' }}</td>
                <td>{{ ap.client_name }}</td>
                <td>{{ ap.service_label }}</td>
                <td>{{ ap.barber }}</td>
                <td>R${% if ap.service == 'combo' %}100{% else %}50{% endif %}</td>
                <td>{{ ap.get_payment_method_display }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="6">Nenhum pagamento concluído</td></tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
    <script src="{% static 'dashboard/js/admin.js' %}"></script>
</section>
{% endblock %}

